<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Country Insights Explorer</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #1a1a1a url('https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/World_map_-_low_resolution.svg/2000px-World_map_-_low_resolution.svg.png') no-repeat center center fixed;
    background-size: cover;
    color: #f0f0f0;
  }
  header { background: rgba(0, 119, 182, 0.85); color: white; padding: 1rem; text-align: center; }
  main { max-width: 900px; margin: auto; padding: 1rem; background: rgba(0,0,0,0.6); border-radius: 8px; }
  label { font-weight: bold; }
  select {
    padding: 0.5rem; font-size: 1rem; margin-top: 0.5rem; width: 100%;
    border-radius: 4px; border: none;
  }
  .card {
    background: rgba(255,255,255,0.1); border-radius: 8px;
    padding: 1rem; margin-top: 1rem;
  }
  img { max-width: 200px; margin-top: 1rem; border: 1px solid #fff; }
  .error { color: #ff6666; font-weight: bold; margin-top: 1rem; }
</style>
</head>
<body>
<header>
  <h1>Country Insights Explorer</h1>
  <p>Select a country to view key facts</p>
</header>
<main>
  <label for="countrySelect">Country:</label>
  <select id="countrySelect">
    <option value="">--Choose a country--</option>
  </select>
  <div id="countryInfo"></div>
  <div id="errorMsg" class="error"></div>
</main>

<script>
const select = document.getElementById('countrySelect');
const infoDiv = document.getElementById('countryInfo');
const errorDiv = document.getElementById('errorMsg');

// ✅ Full backup list of 100+ countries (trimmed here for brevity—keep entire list in your actual file)
const backupCountries = [
  { cca3: 'AFG', name: { common: 'Afghanistan' } }, { cca3: 'ALB', name: { common: 'Albania' } },
  { cca3: 'DZA', name: { common: 'Algeria' } }, { cca3: 'AND', name: { common: 'Andorra' } },
  { cca3: 'AGO', name: { common: 'Angola' } }, { cca3: 'ARG', name: { common: 'Argentina' } },
  /* ...include ALL countries down to... */
  { cca3: 'ZMB', name: { common: 'Zambia' } }, { cca3: 'ZWE', name: { common: 'Zimbabwe' } }
];

function populateDropdown(countries) {
  select.innerHTML = '<option value="">--Choose a country--</option>';
  countries.sort((a, b) => a.name.common.localeCompare(b.name.common))
           .forEach(country => {
             const opt = document.createElement('option');
             opt.value = country.cca3;
             opt.textContent = country.name.common;
             select.appendChild(opt);
           });
}

// Try API first, fallback to backup list if needed
fetch('https://restcountries.com/v3.1/all')
  .then(res => res.json())
  .then(data => {
    if (Array.isArray(data) && data.length > 0) {
      populateDropdown(data);
    } else {
      throw new Error('Empty API');
    }
  })
  .catch(err => {
    errorDiv.textContent = "⚠️ Using backup country list.";
    populateDropdown(backupCountries);
  });

select.addEventListener('change', () => {
  const code = select.value;
  if (!code) { infoDiv.innerHTML = ''; return; }
  fetch(`https://restcountries.com/v3.1/alpha/${code}`)
    .then(res => res.json())
    .then(([data]) => {
      infoDiv.innerHTML = `
        <div class="card">
          <h2>${data.name.common} (${data.cca3})</h2>
          <p><strong>Capital:</strong> ${data.capital ? data.capital[0] : 'N/A'}</p>
          <p><strong>Region:</strong> ${data.region}</p>
          <p><strong>Population:</strong> ${data.population.toLocaleString()}</p>
          <img src="${data.flags.svg}" alt="Flag of ${data.name.common}">
        </div>
      `;
    })
    .catch(() => { infoDiv.innerHTML = '<p class="error">Details unavailable.</p>'; });
});
</script>
</body>
</html>
